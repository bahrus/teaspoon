<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Treegrid Test</title>

    <!--<link rel="stylesheet" type="text/css" href="../Content/themes/smoothness/jquery-ui.css" >-->
    <!--<link rel="stylesheet" type="text/css" href="../Content/themes/base/jquery.ui.theme.css" >-->
    <link rel="stylesheet" type="text/css" href="../Content/font-awesome-4.0.3/css/font-awesome.min.css">
    <link rel="stylesheet"" type="text/css" href="../tsp_script/tsp.css">

    <style data-attribute-link="Attributes">
        .RC {
            width:800px;
            overflow-x:hidden;
            border-spacing: 10px;
        }
    </style>
    <style>
        .vScrollTD{
            width:18px;
        }
    </style>

    <script src="../Scripts/typings/underscore/underscore.d.js" data-genid="lib"></script><script src="../Scripts/jquery-1.11.1.js" data-genid="lib"></script><script src="../tsp_script/DBS.js" data-genid="lib"></script><script src="../Scripts/emmet.js" data-genid="lib"></script><script src="../tsp_script/DBS_b.js" data-genid="lib"></script><script src="../tsp_script/tsp_b.js" data-genid="lib"></script><script src="../tsp_script/DBS_cs.js" data-genid="lib"></script><script src="../tsp_script/tsp_cs.js" data-genid="lib"></script><link href="../Content/font-awesome-4.0.3/css/font-awesome.min.css" data-genid="lib" rel="stylesheet"><link href="../tsp_script/tsp.css" data-genid="lib" rel="stylesheet">
    
    
    <script> var x;</script>
</head>
<body>

    <script data-mode="client-side-only" async="" data-model="[TestWebAppClassic.TreeGridTestModel, TestWebAppClassic].GetTreeGrid" id="treeTable">
    if(typeof(model)=='undefined') model = {};
    model['treeTable'] = {
        "fields": [
            {
                "name": "TreeInfo",
                "isTreeNodeInfo": true,
                "header": null,
                "footer": null
            },
            {
                "name": "Column 0",
                "isTreeNodeInfo": false,
                "header": null,
                "footer": null
            },
            {
                "name": "Column 1",
                "isTreeNodeInfo": false,
                "header": null,
                "footer": null
            },
            {
                "name": "Column 2",
                "isTreeNodeInfo": false,
                "header": null,
                "footer": null
            },
            {
                "name": "Column 3",
                "isTreeNodeInfo": false,
                "header": null,
                "footer": null
            },
            {
                "name": "Column 4",
                "isTreeNodeInfo": false,
                "header": null,
                "footer": null
            },
            {
                "name": "Column 5",
                "isTreeNodeInfo": false,
                "header": null,
                "footer": null
            },
            {
                "name": "Column 6",
                "isTreeNodeInfo": false,
                "header": null,
                "footer": null
            },
            {
                "name": "Column 7",
                "isTreeNodeInfo": false,
                "header": null,
                "footer": null
            },
            {
                "name": "Column 8",
                "isTreeNodeInfo": false,
                "header": null,
                "footer": null
            },
            {
                "name": "Column 9",
                "isTreeNodeInfo": false,
                "header": null,
                "footer": null
            }
        ],
        "data": [
            [
                [
                    "Tree Label 0",
                    "itm_0",
                    "",
                    0,
                    2
                ],
                "Row 0, Column 1",
                "Row 0, Column 2",
                "Row 0, Column 3",
                "Row 0, Column 4",
                "Row 0, Column 5",
                "Row 0, Column 6",
                "Row 0, Column 7",
                "Row 0, Column 8",
                "Row 0, Column 9",
                "Row 0, Column 10"
            ],
            [
                [
                    "Child Node 0 - 0",
                    "itm_0_0",
                    "itm_0",
                    1,
                    2
                ],
                "Child Row 0, Column 1",
                "Child Row 0, Column 2",
                "Child Row 0, Column 3",
                "Child Row 0, Column 4",
                "Child Row 0, Column 5",
                "Child Row 0, Column 6",
                "Child Row 0, Column 7",
                "Child Row 0, Column 8",
                "Child Row 0, Column 9",
                "Child Row 0, Column 10"
            ],
            [
                [
                    "Grand child node 0 - 0 - 0",
                    "itm_0_0_0",
                    "itm_0_0",
                    2,
                    0
                ],
                "Grand Child Row 0, Column 1",
                "Grand Child Row 0, Column 2",
                "Grand Child Row 0, Column 3",
                "Grand Child Row 0, Column 4",
                "Grand Child Row 0, Column 5",
                "Grand Child Row 0, Column 6",
                "Grand Child Row 0, Column 7",
                "Grand Child Row 0, Column 8",
                "Grand Child Row 0, Column 9",
                "Grand Child Row 0, Column 10"
            ],
            [
                [
                    "Grand child node 0 - 0 - 1",
                    "itm_0_0_1",
                    "itm_0_0",
                    2,
                    0
                ],
                "Grand Child Row 1, Column 1",
                "Grand Child Row 1, Column 2",
                "Grand Child Row 1, Column 3",
                "Grand Child Row 1, Column 4",
                "Grand Child Row 1, Column 5",
                "Grand Child Row 1, Column 6",
                "Grand Child Row 1, Column 7",
                "Grand Child Row 1, Column 8",
                "Grand Child Row 1, Column 9",
                "Grand Child Row 1, Column 10"
            ],
            [
                [
                    "Child Node 0 - 1",
                    "itm_0_1",
                    "itm_0",
                    1,
                    2
                ],
                "Child Row 1, Column 1",
                "Child Row 1, Column 2",
                "Child Row 1, Column 3",
                "Child Row 1, Column 4",
                "Child Row 1, Column 5",
                "Child Row 1, Column 6",
                "Child Row 1, Column 7",
                "Child Row 1, Column 8",
                "Child Row 1, Column 9",
                "Child Row 1, Column 10"
            ],
            [
                [
                    "Grand child node 0 - 1 - 0",
                    "itm_0_1_0",
                    "itm_0_1",
                    2,
                    0
                ],
                "Grand Child Row 0, Column 1",
                "Grand Child Row 0, Column 2",
                "Grand Child Row 0, Column 3",
                "Grand Child Row 0, Column 4",
                "Grand Child Row 0, Column 5",
                "Grand Child Row 0, Column 6",
                "Grand Child Row 0, Column 7",
                "Grand Child Row 0, Column 8",
                "Grand Child Row 0, Column 9",
                "Grand Child Row 0, Column 10"
            ],
            [
                [
                    "Grand child node 0 - 1 - 1",
                    "itm_0_1_1",
                    "itm_0_1",
                    2,
                    0
                ],
                "Grand Child Row 1, Column 1",
                "Grand Child Row 1, Column 2",
                "Grand Child Row 1, Column 3",
                "Grand Child Row 1, Column 4",
                "Grand Child Row 1, Column 5",
                "Grand Child Row 1, Column 6",
                "Grand Child Row 1, Column 7",
                "Grand Child Row 1, Column 8",
                "Grand Child Row 1, Column 9",
                "Grand Child Row 1, Column 10"
            ],
            [
                [
                    "Tree Label 1",
                    "itm_1",
                    "",
                    0,
                    2
                ],
                "Row 1, Column 1",
                "Row 1, Column 2",
                "Row 1, Column 3",
                "Row 1, Column 4",
                "Row 1, Column 5",
                "Row 1, Column 6",
                "Row 1, Column 7",
                "Row 1, Column 8",
                "Row 1, Column 9",
                "Row 1, Column 10"
            ],
            [
                [
                    "Child Node 1 - 0",
                    "itm_1_0",
                    "itm_1",
                    1,
                    2
                ],
                "Child Row 0, Column 1",
                "Child Row 0, Column 2",
                "Child Row 0, Column 3",
                "Child Row 0, Column 4",
                "Child Row 0, Column 5",
                "Child Row 0, Column 6",
                "Child Row 0, Column 7",
                "Child Row 0, Column 8",
                "Child Row 0, Column 9",
                "Child Row 0, Column 10"
            ],
            [
                [
                    "Grand child node 1 - 0 - 0",
                    "itm_1_0_0",
                    "itm_1_0",
                    2,
                    0
                ],
                "Grand Child Row 0, Column 1",
                "Grand Child Row 0, Column 2",
                "Grand Child Row 0, Column 3",
                "Grand Child Row 0, Column 4",
                "Grand Child Row 0, Column 5",
                "Grand Child Row 0, Column 6",
                "Grand Child Row 0, Column 7",
                "Grand Child Row 0, Column 8",
                "Grand Child Row 0, Column 9",
                "Grand Child Row 0, Column 10"
            ],
            [
                [
                    "Grand child node 1 - 0 - 1",
                    "itm_1_0_1",
                    "itm_1_0",
                    2,
                    0
                ],
                "Grand Child Row 1, Column 1",
                "Grand Child Row 1, Column 2",
                "Grand Child Row 1, Column 3",
                "Grand Child Row 1, Column 4",
                "Grand Child Row 1, Column 5",
                "Grand Child Row 1, Column 6",
                "Grand Child Row 1, Column 7",
                "Grand Child Row 1, Column 8",
                "Grand Child Row 1, Column 9",
                "Grand Child Row 1, Column 10"
            ],
            [
                [
                    "Child Node 1 - 1",
                    "itm_1_1",
                    "itm_1",
                    1,
                    2
                ],
                "Child Row 1, Column 1",
                "Child Row 1, Column 2",
                "Child Row 1, Column 3",
                "Child Row 1, Column 4",
                "Child Row 1, Column 5",
                "Child Row 1, Column 6",
                "Child Row 1, Column 7",
                "Child Row 1, Column 8",
                "Child Row 1, Column 9",
                "Child Row 1, Column 10"
            ],
            [
                [
                    "Grand child node 1 - 1 - 0",
                    "itm_1_1_0",
                    "itm_1_1",
                    2,
                    0
                ],
                "Grand Child Row 0, Column 1",
                "Grand Child Row 0, Column 2",
                "Grand Child Row 0, Column 3",
                "Grand Child Row 0, Column 4",
                "Grand Child Row 0, Column 5",
                "Grand Child Row 0, Column 6",
                "Grand Child Row 0, Column 7",
                "Grand Child Row 0, Column 8",
                "Grand Child Row 0, Column 9",
                "Grand Child Row 0, Column 10"
            ],
            [
                [
                    "Grand child node 1 - 1 - 1",
                    "itm_1_1_1",
                    "itm_1_1",
                    2,
                    0
                ],
                "Grand Child Row 1, Column 1",
                "Grand Child Row 1, Column 2",
                "Grand Child Row 1, Column 3",
                "Grand Child Row 1, Column 4",
                "Grand Child Row 1, Column 5",
                "Grand Child Row 1, Column 6",
                "Grand Child Row 1, Column 7",
                "Grand Child Row 1, Column 8",
                "Grand Child Row 1, Column 9",
                "Grand Child Row 1, Column 10"
            ],
            [
                [
                    "Tree Label 2",
                    "itm_2",
                    "",
                    0,
                    2
                ],
                "Row 2, Column 1",
                "Row 2, Column 2",
                "Row 2, Column 3",
                "Row 2, Column 4",
                "Row 2, Column 5",
                "Row 2, Column 6",
                "Row 2, Column 7",
                "Row 2, Column 8",
                "Row 2, Column 9",
                "Row 2, Column 10"
            ],
            [
                [
                    "Child Node 2 - 0",
                    "itm_2_0",
                    "itm_2",
                    1,
                    2
                ],
                "Child Row 0, Column 1",
                "Child Row 0, Column 2",
                "Child Row 0, Column 3",
                "Child Row 0, Column 4",
                "Child Row 0, Column 5",
                "Child Row 0, Column 6",
                "Child Row 0, Column 7",
                "Child Row 0, Column 8",
                "Child Row 0, Column 9",
                "Child Row 0, Column 10"
            ],
            [
                [
                    "Grand child node 2 - 0 - 0",
                    "itm_2_0_0",
                    "itm_2_0",
                    2,
                    0
                ],
                "Grand Child Row 0, Column 1",
                "Grand Child Row 0, Column 2",
                "Grand Child Row 0, Column 3",
                "Grand Child Row 0, Column 4",
                "Grand Child Row 0, Column 5",
                "Grand Child Row 0, Column 6",
                "Grand Child Row 0, Column 7",
                "Grand Child Row 0, Column 8",
                "Grand Child Row 0, Column 9",
                "Grand Child Row 0, Column 10"
            ],
            [
                [
                    "Grand child node 2 - 0 - 1",
                    "itm_2_0_1",
                    "itm_2_0",
                    2,
                    0
                ],
                "Grand Child Row 1, Column 1",
                "Grand Child Row 1, Column 2",
                "Grand Child Row 1, Column 3",
                "Grand Child Row 1, Column 4",
                "Grand Child Row 1, Column 5",
                "Grand Child Row 1, Column 6",
                "Grand Child Row 1, Column 7",
                "Grand Child Row 1, Column 8",
                "Grand Child Row 1, Column 9",
                "Grand Child Row 1, Column 10"
            ],
            [
                [
                    "Child Node 2 - 1",
                    "itm_2_1",
                    "itm_2",
                    1,
                    2
                ],
                "Child Row 1, Column 1",
                "Child Row 1, Column 2",
                "Child Row 1, Column 3",
                "Child Row 1, Column 4",
                "Child Row 1, Column 5",
                "Child Row 1, Column 6",
                "Child Row 1, Column 7",
                "Child Row 1, Column 8",
                "Child Row 1, Column 9",
                "Child Row 1, Column 10"
            ],
            [
                [
                    "Grand child node 2 - 1 - 0",
                    "itm_2_1_0",
                    "itm_2_1",
                    2,
                    0
                ],
                "Grand Child Row 0, Column 1",
                "Grand Child Row 0, Column 2",
                "Grand Child Row 0, Column 3",
                "Grand Child Row 0, Column 4",
                "Grand Child Row 0, Column 5",
                "Grand Child Row 0, Column 6",
                "Grand Child Row 0, Column 7",
                "Grand Child Row 0, Column 8",
                "Grand Child Row 0, Column 9",
                "Grand Child Row 0, Column 10"
            ],
            [
                [
                    "Grand child node 2 - 1 - 1",
                    "itm_2_1_1",
                    "itm_2_1",
                    2,
                    0
                ],
                "Grand Child Row 1, Column 1",
                "Grand Child Row 1, Column 2",
                "Grand Child Row 1, Column 3",
                "Grand Child Row 1, Column 4",
                "Grand Child Row 1, Column 5",
                "Grand Child Row 1, Column 6",
                "Grand Child Row 1, Column 7",
                "Grand Child Row 1, Column 8",
                "Grand Child Row 1, Column 9",
                "Grand Child Row 1, Column 10"
            ]
        ]
    };

    </script>

    <script data-attribute-link="" class="RC dependsOn_treeTable">
        DBS.b.MakeRCsUnique;
    </script>
    <script data-attribute-link="fillGridOptions" class="RC dependsOn_treeTable">
        x  = function() {
            return {
                dataTableFn: function(){return model.treeTable},
                verticalOffsetFld: document.getElementById('vs_ScrollVal'),
                horizontalOffsetFld: document.getElementById('hs_ScrollVal'),
                treeColumn: tsp.b.TreeType.triState
            };
        };
    </script>
    <script data-attribute-link="" class="RC dependsOn_treeTable">
        tsp.cs.fillGrid;
    </script>

    <script class="VScrollBar dependsOn_treeTable" data-attribute-link="scrollOptions">
        x = function() {
            return {
                //maxValue: model.treeTable.data.length,
                direction: tsp.b.DirectionOptions.Vertical,
                maxValueFn: function () {
                    var v = model.treeTable.rowView;
                    return v ? v.length : 0;
                },
                maxElementSize: 24,
                formTargets: $('#scrollValues'),
                maxValueChangeNotifier: model.treeTable.changeNotifier
            };
        }
    </script>

    <script class="HScrollBar dependsOn_treeTable" data-attribute-link="scrollOptions">
        x = function() {
            return {
                direction: tsp.b.DirectionOptions.Horizontal,
                maxValue: model.treeTable.fields.length,
                maxElementSize: 100,
                formTargets: $('#scrollValues')
            };
        }
    </script>

    <script data-attribute-link="" class="VScrollBar HScrollBar dependsOn_treeTable">
        tsp.cs.addScroll;
    </script>


    <script>
        function expandAll() {
            var data = model.treeTable.data;
            var tnIdx = tsp.b.getNodeFldIdx(model.treeTable);
            var n = tsp.b.nodeIdxes;
            var chIdx = n.numChildren;
            for(var i = 0, n = data.length; i < n; i++){
                var row = data[i];
                var tn = row[tnIdx];
                tn[chIdx] = -Math.abs(tn[chIdx]);
            }
            var tabl = document.querySelector('table.RC');
            var svScroll = document.querySelector('input#vs_ScrollVal');
            var fgo = DBS.b.data(tabl)['fillGridOptions'];
            tsp.b.applyTreeView(tabl, fgo);
            tsp.b.refreshBodyTemplateWithRectCoords(tabl, svScroll, fgo);
        }
    </script>
    <input type="button" onclick="expandAll()" value="Expand All">

    <script type="text/emmet" data-mode="client-side-only">
        (table>
            (tr>
                (td>
                    table.RC>(
                        (thead>tr>th[data-hc=1,$]*3)
                      + (tbody>
                            (tr>
                                (td[data-rc=r,$]*3)
                            )*6
                        )
                    )
                )
                + (td.vScrollTD>
                  div#vs.VScrollBar[style=height:200px]
                )
            )
            + tr>td>div#hs.HScrollBar[style=width:600px]
        )
        + form#scrollValues>
            (input#vs_ScrollVal[name=vs_ScrollVal][type='hidden'])
            + (input#hs_ScrollVal[name=hs_ScrollVal][type='hidden'])
</script>

</body>
</html>